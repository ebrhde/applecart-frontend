(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[222],{6377:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/checkout",function(){return r(7191)}])},269:function(e,t,r){"use strict";var a=r(5893),s=(r(7294),r(1664)),c=r(6393),n=r.n(c),l=r(1608),o=r(1555),i=r(8182);t.Z=function(e){return(0,a.jsx)(l.Z,{children:e.categories.map((function(e){return(0,a.jsx)(o.Z,{md:3,children:(0,a.jsxs)(i.Z,{className:n().cat_card,children:[(0,a.jsx)("div",{className:n().cat_card_overlay,children:(0,a.jsx)("p",{children:(0,a.jsx)(s.default,{href:"/catalog/".concat(e.alias),children:e.title})})}),(0,a.jsx)("img",{className:n().cat_img,src:e.image})]})})}))})}},7191:function(e,t,r){"use strict";r.r(t),r.d(t,{__N_SSP:function(){return C},default:function(){return Z}});var a=r(5893),s=r(7294),c=r(6699),n=r(5147),l=r(1555),o=r(1608),i=r(5005),d=r(8375),h=r(1664),u=r(4951),m=r.n(u),_=r(7174),x=r(1152),j=r(7646),p=r(2529),f=r(2257),b=function(e){return(0,a.jsxs)(p.Z,{onSubmit:function(t){t.preventDefault(),e.handleOrderSubmit()},children:[(0,a.jsxs)(p.Z.Group,{className:"mb-3",controlId:"orderFormName",children:[(0,a.jsx)(p.Z.Label,{children:"Customer name"}),(0,a.jsx)(p.Z.Control,{type:"text",name:"name",onChange:function(t){return e.handleFieldChange(t.target.name,t.target.value)},onBlur:function(t){return e.handleFieldBlur(t.target.name)},value:e.name}),(0,a.jsx)(p.Z.Text,{className:"text-danger",children:e.nameError})]}),(0,a.jsxs)(p.Z.Group,{className:"mb-3",controlId:"orderFormPhone",children:[(0,a.jsx)(p.Z.Label,{children:"Contact phone"}),(0,a.jsx)(p.Z.Control,{type:"text",name:"phone",onChange:function(t){return e.handleFieldChange(t.target.name,t.target.value)},onBlur:function(t){return e.handleFieldBlur(t.target.name)},value:e.phone}),(0,a.jsx)(p.Z.Text,{className:"text-danger",children:e.phoneError})]}),(0,a.jsxs)(p.Z.Group,{className:"mb-3",controlId:"orderFormAddress",children:[(0,a.jsx)(p.Z.Label,{children:"Delivery address"}),(0,a.jsx)(p.Z.Control,{type:"text",name:"address",onChange:function(t){return e.handleFieldChange(t.target.name,t.target.value)},onBlur:function(t){return e.handleFieldBlur(t.target.name)},value:e.address}),(0,a.jsx)(p.Z.Text,{className:"text-danger",children:e.addressError})]}),(0,a.jsxs)(p.Z.Group,{className:"mb-3",controlId:"orderFormNote",children:[(0,a.jsx)(p.Z.Label,{children:"Extra info"}),(0,a.jsx)(p.Z.Control,{className:"mb-3",as:"textarea",rows:5,name:"note",onChange:function(t){return e.handleFieldChange(t.target.name,t.target.value)},value:e.note})]}),(0,a.jsx)(i.Z,{variant:"success",type:"submit",disabled:e.isSubmitDisabled,children:"Submit"}),e.isOrderFetching&&(0,a.jsx)(f.Z,{})]})},g=r(5449),N=function(){var e=(0,_.C)((function(e){return{real_name:e.user.real_name,phone_number:e.user.phone_number}})),t=(0,s.useState)(e.real_name),r=t[0],c=t[1],n=(0,s.useState)(""),l=n[0],o=n[1],i=(0,s.useState)(!0),d=i[0],h=i[1],u=(0,s.useState)(e.phone_number),m=u[0],x=u[1],j=(0,s.useState)(""),p=j[0],f=j[1],N=(0,s.useState)(!0),v=N[0],k=N[1],C=(0,s.useState)(""),Z=C[0],y=C[1],S=(0,s.useState)(""),P=S[0],w=S[1],F=(0,s.useState)(!1),E=F[0],$=F[1],T=(0,s.useState)(""),q=T[0],B=T[1],I=(0,s.useState)(!0),O=I[0],R=I[1],G=(0,_.C)((function(e){return e.order.isFetching})),L=(0,_.T)();return(0,s.useEffect)((function(){R(!(d&&v&&E))}),[d,v,E]),(0,a.jsx)(b,{handleOrderSubmit:function(){L((0,g.fS)({name:r,phone:m,address:Z,note:q})).then((function(e){"error"!==e.payload.status&&(c(""),x(""),y(""),B(""))}))},name:r,phone:m,address:Z,note:q,handleFieldChange:function(e,t){switch(e){case"name":c(t);break;case"phone":x(t);break;case"address":y(t);break;case"note":B(t)}},handleFieldBlur:function(e){switch(e){case"name":r&&r.length<3||r&&r.length>255?(o("Too short or long value"),h(!1)):r&&!r.match("^[\u0430-\u044f\u0410-\u042f\u0451\u0401a-zA-Z ]+$")?(o("The field should contain only characters and spaces"),h(!1)):(o(""),h(!0));break;case"phone":m?m.length<11?f("The field should contain no less than 11 characters"):m.match("^((8|\\+7)[\\- ]?)?(\\(?\\d{3}\\)?[\\- ]?)?[\\d\\- ]{7,10}$")?(f(""),k(!0)):f("Wrong phone format"):f("The field should be completed");break;case"address":Z&&Z.length<3?(w("Too short or long value"),$(!1)):(w(""),$(!0))}},nameError:l,phoneError:p,addressError:P,isOrderFetching:G,isSubmitDisabled:O})},v=r(269),k=r(9008),C=!0,Z=function(e){var t=e.categories,r=(0,_.C)((function(e){return{username:e.user.username,items:e.cart.items,totalCount:e.cart.totalCount,totalPrice:e.cart.totalPrice}})),u=(0,s.useState)(!0),p=(u[0],u[1]),f=(0,_.T)(),b=(0,_.C)((function(e){return e.order.orderResponse}));return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(k.default,{children:[(0,a.jsx)("title",{children:"Applecart eshop | Checkout"}),(0,a.jsx)("meta",{name:"description",content:"Generated by create next app"}),(0,a.jsx)("link",{rel:"icon",href:"/favicon.ico"}),(0,a.jsx)("link",{href:"https://fonts.googleapis.com/css2?family=Righteous&display=swap",rel:"stylesheet"})]}),(0,a.jsx)("section",{className:"section--page",children:(0,a.jsxs)("div",{className:"page--container container",children:[(0,a.jsxs)(c.Z,{className:"custom-breadcrumb",children:[(0,a.jsx)(c.Z.Item,{children:(0,a.jsx)(h.default,{href:"/",children:"Home"})}),(0,a.jsx)(c.Z.Item,{active:!0,children:"Checkout"})]}),r.totalCount?(0,a.jsxs)("div",{className:m().checkout,children:[(0,a.jsx)("h2",{className:m().page_title+" mb-5",children:"Checkout"}),(0,a.jsxs)("h5",{className:"mb-4",children:["Your cart have: ",r.totalCount," product(s)"]}),(0,a.jsx)("div",{className:m().checkout__table,children:(0,a.jsxs)(n.Z,{className:"table-bordered text-center",children:[(0,a.jsx)("thead",{className:m().thead__dark,children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{scope:"col",children:"\u2116"}),(0,a.jsx)("th",{scope:"col",children:"Product"}),(0,a.jsx)("th",{scope:"col",children:"Quantity"}),(0,a.jsx)("th",{scope:"col",children:"Title"}),(0,a.jsx)("th",{scope:"col",children:"Cost"}),(0,a.jsx)("th",{scope:"col",children:"Remove"})]})}),(0,a.jsx)("tbody",{children:r.items.map((function(e,t){return(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{scope:"row",className:m().checkout__tableCell,children:t+1}),(0,a.jsx)("td",{className:m().checkout__tableCell,children:(0,a.jsx)("a",{href:"#",children:(0,a.jsx)("img",{src:e.productMedia[0],alt:e.title,className:m().checkout__img})})}),(0,a.jsxs)("td",{className:m().checkout__tableCell,children:[(0,a.jsx)("button",{className:"btn btn-light qty_change","data-qty":"-1",children:"-"}),e.quantity,(0,a.jsx)("button",{className:"btn btn-light qty_change","data-qty":"1",children:"+"})]}),(0,a.jsx)("td",{className:m().checkout__tableCell,children:(0,a.jsx)("p",{children:e.title})}),(0,a.jsxs)("td",{className:m().checkout__tableCell,children:[(0,x.Z)(e.price),"$"]}),(0,a.jsx)("td",{className:m().checkout__tableCell,children:(0,a.jsx)("a",{href:"#",children:(0,a.jsx)("i",{className:"fa fa-trash","aria-hidden":"true"})})})]})}))})]})}),(0,a.jsx)("div",{className:m().order_mobile,children:r.items.map((function(e,t){return(0,a.jsxs)("div",{className:m().order_mobile_item,children:[(0,a.jsx)("h5",{children:e.title}),(0,a.jsxs)("div",{className:m().order_mobile_item_details+" row",children:[(0,a.jsx)(l.Z,{xs:6,children:(0,a.jsx)(h.default,{href:"/catalog/".concat(e.categoryAlias,"/").concat(e.alias),children:(0,a.jsx)("img",{src:e.productMedia[0],className:m().order_img})})}),(0,a.jsxs)(l.Z,{xs:6,children:[(0,a.jsx)("button",{className:"btn btn-light qty_change","data-qty":"-1","data-id":"<?=$id?>",children:"-"}),e.quantity,(0,a.jsx)("button",{className:"btn btn-light qty_change","data-qty":"1","data-id":"<?=$id?>",children:"+"}),(0,a.jsxs)("h5",{children:[(0,x.Z)(e.price),"$"]})]})]})]},t)}))}),(0,a.jsxs)(o.Z,{children:[(0,a.jsxs)(l.Z,{md:4,className:m().checkout__prices,children:[r.items.map((function(e){return(0,a.jsxs)("div",{className:m().checkout__price,children:[(0,a.jsx)("p",{children:e.title}),(0,a.jsxs)("p",{children:[(0,x.Z)(e.price),"$"]})]})})),(0,a.jsx)("hr",{}),(0,a.jsxs)("div",{className:m().checkout__price,children:[(0,a.jsx)("p",{children:"\u0418\u0442\u043e\u0433\u043e:"}),(0,a.jsxs)("p",{children:[(0,x.Z)(r.totalPrice),"$"]})]})]}),(0,a.jsxs)(l.Z,{md:8,children:[r.username&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("h5",{children:"Order details"}),(0,a.jsx)(N,{})]}),!r.username&&(0,a.jsxs)("div",{className:m().checkout__no_customer+" my-4",children:[(0,a.jsx)("span",{children:"To checkout, please"}),(0,a.jsx)("br",{}),(0,a.jsx)(i.Z,{className:"signinButton mx-3",onClick:function(){return f(j.No.actions.toggleSigninShown())},variant:"success",children:"Log in"}),(0,a.jsx)("span",{children:"or"}),(0,a.jsx)(i.Z,{className:"signinButton mx-3",onClick:function(){return f(j.No.actions.toggleSignupShown())},variant:"success",children:"Sign up"})]})]})]})]}):(0,a.jsxs)("div",{className:m().checkout,children:[(0,a.jsx)("h2",{className:m().page_title+" mb-5",children:"Checkout"}),b&&(0,a.jsx)(d.Z,{variant:"success",onClose:function(){return p(!1)},dismissible:!0,children:(0,a.jsx)("p",{children:b})}),(0,a.jsx)("h4",{className:m().no_products+" mb-4",children:"Your cart have no products for checkout"}),(0,a.jsx)(v.Z,{categories:t})]})]})})]})}},6393:function(e){e.exports={cat_card:"CatalogGallery_cat_card__rCXeT",cat_card_overlay:"CatalogGallery_cat_card_overlay__fvINh",cat_img:"CatalogGallery_cat_img__qnxxv"}},4951:function(e){e.exports={checkout:"Checkout_checkout__mDYaY",checkout__table:"Checkout_checkout__table__zJF1O",checkout__tableCell:"Checkout_checkout__tableCell__u71IM",checkout__img:"Checkout_checkout__img__cjqM7",checkout__prices:"Checkout_checkout__prices__hoJq0",checkout__price:"Checkout_checkout__price___eO_q",checkout__no_customer:"Checkout_checkout__no_customer__Vt9bc",page_title:"Checkout_page_title__EeKVY",thead__dark:"Checkout_thead__dark__RbSvi",no_products:"Checkout_no_products__p0r_L",order_mobile:"Checkout_order_mobile__1n1AU",order_mobile_item:"Checkout_order_mobile_item__ROaRf",order_mobile_item_details:"Checkout_order_mobile_item_details__3GDz3","col-xs-6":"Checkout_col-xs-6__Y6FsU",order_img:"Checkout_order_img__PFaYp"}},9008:function(e,t,r){e.exports=r(3121)},6699:function(e,t,r){"use strict";r.d(t,{Z:function(){return u}});var a=r(4184),s=r.n(a),c=r(7294),n=r(6792),l=r(3833),o=r(5893);const i=c.forwardRef((({bsPrefix:e,active:t,children:r,className:a,as:c="li",linkAs:i=l.Z,linkProps:d,href:h,title:u,target:m,..._},x)=>{const j=(0,n.vE)(e,"breadcrumb-item");return(0,o.jsx)(c,{ref:x,..._,className:s()(j,a,{active:t}),"aria-current":t?"page":void 0,children:t?r:(0,o.jsx)(i,{...d,href:h,title:u,target:m,children:r})})}));i.displayName="BreadcrumbItem",i.defaultProps={active:!1,linkProps:{}};var d=i;const h=c.forwardRef((({bsPrefix:e,className:t,listProps:r,children:a,label:c,as:l="nav",...i},d)=>{const h=(0,n.vE)(e,"breadcrumb");return(0,o.jsx)(l,{"aria-label":c,className:t,ref:d,...i,children:(0,o.jsx)("ol",{...r,className:s()(h,null==r?void 0:r.className),children:a})})}));h.displayName="Breadcrumb",h.defaultProps={label:"breadcrumb",listProps:{}};var u=Object.assign(h,{Item:d})},8182:function(e,t,r){"use strict";r.d(t,{Z:function(){return Z}});var a=r(4184),s=r.n(a),c=r(7294),n=r(6792),l=r(6611),o=r(9602),i=r(5893);const d=c.forwardRef((({bsPrefix:e,className:t,variant:r,as:a="img",...c},l)=>{const o=(0,n.vE)(e,"card-img");return(0,i.jsx)(a,{ref:l,className:s()(r?`${o}-${r}`:o,t),...c})}));d.displayName="CardImg";var h=d,u=r(9059);const m=c.forwardRef((({bsPrefix:e,className:t,as:r="div",...a},l)=>{const o=(0,n.vE)(e,"card-header"),d=(0,c.useMemo)((()=>({cardHeaderBsPrefix:o})),[o]);return(0,i.jsx)(u.Z.Provider,{value:d,children:(0,i.jsx)(r,{ref:l,...a,className:s()(t,o)})})}));m.displayName="CardHeader";var _=m;const x=(0,o.Z)("h5"),j=(0,o.Z)("h6"),p=(0,l.Z)("card-body"),f=(0,l.Z)("card-title",{Component:x}),b=(0,l.Z)("card-subtitle",{Component:j}),g=(0,l.Z)("card-link",{Component:"a"}),N=(0,l.Z)("card-text",{Component:"p"}),v=(0,l.Z)("card-footer"),k=(0,l.Z)("card-img-overlay"),C=c.forwardRef((({bsPrefix:e,className:t,bg:r,text:a,border:c,body:l,children:o,as:d="div",...h},u)=>{const m=(0,n.vE)(e,"card");return(0,i.jsx)(d,{ref:u,...h,className:s()(t,m,r&&`bg-${r}`,a&&`text-${a}`,c&&`border-${c}`),children:l?(0,i.jsx)(p,{children:o}):o})}));C.displayName="Card",C.defaultProps={body:!1};var Z=Object.assign(C,{Img:h,Title:f,Subtitle:b,Body:p,Link:g,Text:N,Header:_,Footer:v,ImgOverlay:k})},1608:function(e,t,r){"use strict";var a=r(4184),s=r.n(a),c=r(7294),n=r(6792),l=r(5893);const o=["xxl","xl","lg","md","sm","xs"],i=c.forwardRef((({bsPrefix:e,className:t,as:r="div",...a},c)=>{const i=(0,n.vE)(e,"row"),d=`${i}-cols`,h=[];return o.forEach((e=>{const t=a[e];let r;delete a[e],null!=t&&"object"===typeof t?({cols:r}=t):r=t;const s="xs"!==e?`-${e}`:"";null!=r&&h.push(`${d}${s}-${r}`)})),(0,l.jsx)(r,{ref:c,...a,className:s()(t,i,...h)})}));i.displayName="Row",t.Z=i}},function(e){e.O(0,[774,888,179],(function(){return t=6377,e(e.s=t);var t}));var t=e.O();_N_E=t}]);